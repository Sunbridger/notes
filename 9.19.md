# 发布订阅模式 和 观察者模式


我们把这些差异快速总结一下：


1. 在观察者模式中，观察者是知道Subject的，Subject一直保持对观察者进行记录。然而，在发布订阅模式中，发布者和订阅者不知道对方的存在。它们只有通过`消息代理`进行通信。


2. 在发布订阅模式中，组件是`松散耦合`的，正好和观察者模式相反。


3. 观察者模式大多数时候是`同步`的，比如当事件触发，Subject就会去调用观察者的方法。而发布-订阅模式大多数时候是`异步`的（使用消息队列）。

4. 观察者模式依赖一旦改变就会触发更新，而订阅发布模式则需要手动触发更新

在观察者模式中，观察者需要直接订阅目标事件；在目标发出内容改变的事件后，直接接收事件并作出响应 
```
 ╭─────────────╮  Fire Event  ╭──────────────╮
 │             │─────────────>│              │
 │   Subject   │              │   Observer   │
 │             │<─────────────│              │
 ╰─────────────╯  Subscribe   ╰──────────────╯
```



 
 在发布订阅模式中，发布者和订阅者之间多了一个发布通道；一方面从发布者接收事件，另一方面向订阅者发布事件；订阅者需要从事件通道订阅事件以此避免发布者和订阅者之间产生依赖关系。
 ```
 ╭─────────────╮                 ╭───────────────╮   Fire Event   ╭──────────────╮
 │             │  Publish Event  │               │───────────────>│              │
 │  Publisher  │────────────────>│ Event Channel │                │  Subscriber  │
 │             │                 │               │<───────────────│              │
 ╰─────────────╯                 ╰───────────────╯    Subscribe   ╰──────────────╯
 ```